{"ast":null,"code":"import _objectSpread from\"C:/Users/alexa/OneDrive/Programming/FULL_STACK_DJANGO_AND_REACT/Chapter_1/social-media-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/alexa/OneDrive/Programming/FULL_STACK_DJANGO_AND_REACT/Chapter_1/social-media-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";//src/components/profile/UpdateProfileForm.jsx\nimport React,{useState,useContext}from\"react\";import{Form,Button,Image}from\"react-bootstrap\";import{useNavigate}from\"react-router\";import{useUserActions}from\"../../hooks/user.actions\";import{Context}from\"../Layouts\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UpdateProfileForm(props){var profile=props.profile;var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),validated=_useState2[0],setValidated=_useState2[1];var _useState3=useState(profile),_useState4=_slicedToArray(_useState3,2),form=_useState4[0],setForm=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var userActions=useUserActions();var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),avatar=_useState8[0],setAvatar=_useState8[1];var _useContext=useContext(Context),setToaster=_useContext.setToaster;var handleSubmit=function handleSubmit(event){event.preventDefault();var updateProfileForm=event.currentTarget;if(updateProfileForm.checkValidity()===false){event.stopPropagation();}setValidated(true);var data={first_name:form.first_name,last_name:form.last_name,bio:form.bio};var formData=new FormData();Object.keys(data).forEach(function(key){if(data[key]){formData.append(key,data[key]);}});if(avatar){formData.append(\"avatar\",avatar);}userActions.edit(formData,profile.id).then(function(){setToaster({type:\"success\",message:\"Profile updated successfully\",show:true,title:\"Profile updated\"});navigate(-1);}).catch(function(err){if(err.message){setError(err.request.response);}});};return/*#__PURE__*/_jsxs(Form,{id:\"registration-form\",className:\"border p-4 rounded\",noValidate:true,validated:validated,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3 d-flex flex-column\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"text-center\",children:\"Avatar\"}),/*#__PURE__*/_jsx(Image,{src:form.avatar,roundedCircle:true,width:120,height:120,className:\"m-2 border border-primary border-2 align-self-center\"}),/*#__PURE__*/_jsx(Form.Control,{onChange:function onChange(e){return setAvatar(e.target.files[0]);},className:\"w-50 align-self-center\",type:\"file\",size:\"sm\"}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"This file is required\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"First Name\"}),/*#__PURE__*/_jsx(Form.Control,{value:form.first_name,onChange:function onChange(e){return setForm(_objectSpread(_objectSpread({},form),{},{first_name:e.target.value}));},required:true,type:\"text\",placeholder:\"Enter first name\"}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"This file is required.\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Last name\"}),/*#__PURE__*/_jsx(Form.Control,{value:form.last_name,onChange:function onChange(e){return setForm(_objectSpread(_objectSpread({},form),{},{last_name:e.target.value}));},required:true,type:\"text\",placeholder:\"Enter last name\"}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"This file is required.\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Bio\"}),/*#__PURE__*/_jsx(Form.Control,{value:form.bio,onChange:function onChange(e){return setForm(_objectSpread(_objectSpread({},form),{},{bio:e.target.value}));},as:\"textarea\",rows:3,placeholder:\"A simple bio ... (Optional)\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-content text-danger\",children:error&&/*#__PURE__*/_jsx(\"p\",{children:error})}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Save changes\"})]});}export default UpdateProfileForm;","map":{"version":3,"names":["React","useState","useContext","Form","Button","Image","useNavigate","useUserActions","Context","jsx","_jsx","jsxs","_jsxs","UpdateProfileForm","props","profile","navigate","_useState","_useState2","_slicedToArray","validated","setValidated","_useState3","_useState4","form","setForm","_useState5","_useState6","error","setError","userActions","_useState7","_useState8","avatar","setAvatar","_useContext","setToaster","handleSubmit","event","preventDefault","updateProfileForm","currentTarget","checkValidity","stopPropagation","data","first_name","last_name","bio","formData","FormData","Object","keys","forEach","key","append","edit","id","then","type","message","show","title","catch","err","request","response","className","noValidate","onSubmit","children","Group","Label","src","roundedCircle","width","height","Control","onChange","e","target","files","size","Feedback","value","_objectSpread","required","placeholder","as","rows","variant"],"sources":["C:/Users/alexa/OneDrive/Programming/FULL_STACK_DJANGO_AND_REACT/Chapter_1/social-media-app/src/components/profile/UpdateProfileForm.jsx"],"sourcesContent":["//src/components/profile/UpdateProfileForm.jsx\r\nimport React, { useState, useContext } from \"react\";\r\nimport { Form, Button, Image } from \"react-bootstrap\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { useUserActions } from \"../../hooks/user.actions\";\r\nimport { Context } from \"../Layouts\";\r\n\r\n\r\nfunction UpdateProfileForm(props) {\r\n    const { profile } = props;\r\n    const navigate = useNavigate();\r\n    const [ validated, setValidated ] = useState(false);\r\n    const [ form, setForm ] = useState(profile);\r\n    const [ error, setError ] = useState(null);\r\n    const userActions = useUserActions();\r\n    const [ avatar, setAvatar ] = useState();\r\n    const { setToaster } = useContext(Context);\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        const updateProfileForm = event.currentTarget;\r\n        if(updateProfileForm.checkValidity() === false) {\r\n            event.stopPropagation();\r\n        }\r\n        setValidated(true);\r\n        const data = {\r\n            first_name: form.first_name,\r\n            last_name: form.last_name,\r\n            bio: form.bio,\r\n        };\r\n        const formData = new FormData();\r\n        Object.keys(data).forEach((key) => {\r\n            if (data[key]) {\r\n                formData.append(key, data[key]);\r\n            }\r\n        });\r\n        if (avatar) {\r\n            formData.append(\"avatar\", avatar);\r\n        }\r\n        userActions.edit(formData, profile.id)\r\n        .then(() => {\r\n            setToaster({\r\n                type: \"success\",\r\n                message: \"Profile updated successfully\",\r\n                show: true,\r\n                title: \"Profile updated\",\r\n            });\r\n            navigate(-1);\r\n        })\r\n        .catch((err) => {\r\n            if (err.message) {\r\n                setError(err.request.response);\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    return(\r\n        <Form\r\n        id = \"registration-form\"\r\n        className = \"border p-4 rounded\"\r\n        noValidate\r\n        validated = {validated}\r\n        onSubmit = {handleSubmit}>\r\n            <Form.Group className = \"mb-3 d-flex flex-column\">\r\n                <Form.Label className = \"text-center\">\r\n                    Avatar\r\n                </Form.Label>\r\n                <Image\r\n                src = {form.avatar}\r\n                roundedCircle\r\n                width = {120}\r\n                height = {120}\r\n                className = \"m-2 border border-primary border-2 align-self-center\"/>\r\n                <Form.Control\r\n                onChange = {(e) => setAvatar(e.target.files[0])\r\n                        }\r\n                className = \"w-50 align-self-center\"\r\n                type = \"file\"\r\n                size = \"sm\"/>\r\n                <Form.Control.Feedback type = \"invalid\">\r\n                    This file is required\r\n                </Form.Control.Feedback>\r\n            </Form.Group>\r\n            <Form.Group className=\"mb-3\">\r\n                <Form.Label>\r\n                    First Name\r\n                </Form.Label>\r\n                <Form.Control\r\n                value={form.first_name}\r\n                onChange={(e) => setForm({ ...form, first_name: e.target.value })}\r\n                required\r\n                type=\"text\"\r\n                placeholder=\"Enter first name\"/>\r\n                <Form.Control.Feedback type=\"invalid\">\r\n                    This file is required.\r\n                </Form.Control.Feedback>\r\n            </Form.Group>\r\n            <Form.Group className=\"mb-3\">\r\n                <Form.Label>\r\n                    Last name\r\n                </Form.Label>\r\n                <Form.Control\r\n                value={form.last_name}\r\n                onChange={(e) => setForm({ ...form, last_name: e.target.value })}\r\n                required\r\n                type=\"text\"\r\n                placeholder=\"Enter last name\"/>\r\n                <Form.Control.Feedback type=\"invalid\">\r\n                    This file is required.\r\n                </Form.Control.Feedback>\r\n            </Form.Group>\r\n            <Form.Group className=\"mb-3\">\r\n                <Form.Label>\r\n                    Bio\r\n                </Form.Label>\r\n                <Form.Control\r\n                value={form.bio}\r\n                onChange={(e) => setForm({ ...form, bio: e.target.value })}\r\n                as=\"textarea\"\r\n                rows={3}\r\n                placeholder=\"A simple bio ... (Optional)\"/>\r\n            </Form.Group>\r\n        <div className=\"text-content text-danger\">\r\n            {error && <p>{error}</p>}\r\n        </div>\r\n        <Button variant=\"primary\" type=\"submit\">\r\n            Save changes\r\n        </Button>\r\n        </Form>\r\n    );\r\n}\r\n\r\nexport default UpdateProfileForm;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}