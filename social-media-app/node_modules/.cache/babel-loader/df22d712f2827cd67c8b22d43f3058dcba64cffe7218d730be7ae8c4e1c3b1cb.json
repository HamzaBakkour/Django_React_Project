{"ast":null,"code":"//src/hooks/user.actions.js\nimport axios from\"axios\";import{useNavigate}from\"react-router-dom\";import axtiosService from\"../helpers/axios\";function useUserActions(){var navigate=useNavigate();var baseURL=process.env.REACT_APP_API_URL;return{login:login,register:register,logout:logout,edit:edit};// Login the user\nfunction login(data){return axios.post(\"\".concat(baseURL,\"/auth/login/\"),data).then(function(res){// Registering the account and tokens in the store\nsetUserData(res.data);navigate(\"/\");});}// Register the user\nfunction register(data){return axios.post(\"\".concat(baseURL,\"/auth/register/\"),data).then(function(res){// Registering the account and tokens in the store\nsetUserData(res.data);navigate(\"/\");});}// Logout the user\nfunction logout(){localStorage.removeItem(\"auth\");navigate(\"/login\");}function edit(data,userId){return axtiosService.patch(\"\".concat(baseURL,\"/user/\").concat(userId,\"/\"),data,{headers:{\"content-type\":\"multipart/form-data\"}}).then(function(res){localStorage.setItem(\"auth\",JSON.stringify({access:getAccessToken(),refresh:getRefreshToken(),user:res.data}));});}}// Get the user\nfunction getUser(){var auth=JSON.parse(localStorage.getItem(\"auth\"))||null;if(auth){return auth.user;}else{return null;}}// Get the access token\nfunction getAccessToken(){var auth=JSON.parse(localStorage.getItem(\"auth\"));return auth.access;}// Get the refresh token\nfunction getRefreshToken(){var auth=JSON.parse(localStorage.getItem(\"auth\"));return auth.refresh;}// Set the access, token and user property\nfunction setUserData(data){localStorage.setItem(\"auth\",JSON.stringify({access:data.access,refresh:data.refresh,user:data.user}));}export{useUserActions,getUser,getAccessToken,getRefreshToken};","map":{"version":3,"names":["axios","useNavigate","axtiosService","useUserActions","navigate","baseURL","process","env","REACT_APP_API_URL","login","register","logout","edit","data","post","concat","then","res","setUserData","localStorage","removeItem","userId","patch","headers","setItem","JSON","stringify","access","getAccessToken","refresh","getRefreshToken","user","getUser","auth","parse","getItem"],"sources":["C:/Users/alexa/OneDrive/Programming/FULL_STACK_DJANGO_AND_REACT/Chapter_1/social-media-app/src/hooks/user.actions.js"],"sourcesContent":["//src/hooks/user.actions.js\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axtiosService from \"../helpers/axios\";\r\n\r\nfunction useUserActions() {\r\n    const navigate = useNavigate();\r\n    const baseURL = process.env.REACT_APP_API_URL;\r\n\r\n    return {\r\n        login,\r\n        register,\r\n        logout,\r\n        edit\r\n    };\r\n\r\n    // Login the user\r\n    function login(data) {\r\n            return axios.post(`${baseURL}/auth/login/`, data).then((res) => {\r\n            // Registering the account and tokens in the store\r\n            setUserData(res.data);\r\n            navigate(\"/\");\r\n        });\r\n    }\r\n\r\n    // Register the user\r\n    function register(data) {\r\n            return axios.post(`${baseURL}/auth/register/`, data).then((res) => {\r\n            // Registering the account and tokens in the store\r\n            setUserData(res.data);\r\n            navigate(\"/\");\r\n        });\r\n    }\r\n\r\n  // Logout the user\r\n    function logout() {\r\n        localStorage.removeItem(\"auth\");\r\n        navigate(\"/login\");\r\n    }\r\n\r\n    function edit(data, userId) {\r\n        return axtiosService.patch(`${baseURL}/user/${userId}/`, data, {\r\n            headers: {\r\n                \"content-type\": \"multipart/form-data\",\r\n                },\r\n            })\r\n            .then((res) => {\r\n                localStorage.setItem(\r\n                                    \"auth\",\r\n                                    JSON.stringify({\r\n                                        access: getAccessToken(),\r\n                                        refresh: getRefreshToken(),\r\n                                        user: res.data,\r\n                                    })\r\n                            );\r\n            });\r\n        }\r\n}\r\n\r\n// Get the user\r\nfunction getUser() {\r\n    const auth = JSON.parse(localStorage.getItem(\"auth\")) || null;\r\n    if (auth) {\r\n        return auth.user;\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n\r\n// Get the access token\r\nfunction getAccessToken() {\r\n    const auth = JSON.parse(localStorage.getItem(\"auth\"));\r\n    return auth.access;\r\n}\r\n\r\n// Get the refresh token\r\nfunction getRefreshToken() {\r\n    const auth = JSON.parse(localStorage.getItem(\"auth\"));\r\n    return auth.refresh;\r\n}\r\n\r\n// Set the access, token and user property\r\nfunction setUserData(data) {\r\n    localStorage.setItem(\r\n        \"auth\",\r\n        JSON.stringify({\r\n            access: data.access,\r\n            refresh: data.refresh,\r\n            user: data.user,\r\n        })\r\n    );\r\n}\r\n\r\nexport { useUserActions, getUser, getAccessToken, getRefreshToken };\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}