{"ast":null,"code":"//src/components/comments/Comment.jsx\nimport React,{useContext}from\"react\";import{MoreOutlined}from\"@ant-design/icons\";import{Image,Card,Dropdown}from\"react-bootstrap\";import axiosService from\"../../helpers/axios\";import{getUser}from\"../../hooks/user.actions\";import{Context}from\"../Layouts\";import UpdateComment from\"./UpdateComment\";import Moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MoreToggleIcon=/*#__PURE__*/React.forwardRef(function(_ref,ref){var _onClick=_ref.onClick;return/*#__PURE__*/_jsx(\"a\",{href:\"#\",ref:ref,onClick:function onClick(e){e.preventDefault();_onClick(e);},children:/*#__PURE__*/_jsx(MoreOutlined,{})});});function Comment(props){var postId=props.postId,comment=props.comment,refresh=props.refresh;var _useContext=useContext(Context),setToaster=_useContext.setToaster;var user=getUser();var handleDelete=function handleDelete(){axiosService.delete(\"/post/\".concat(postId,\"/comment/\").concat(comment.id,\"/\")).then(function(){setToaster({type:\"danger\",message:\"Comment deleted\",show:true,title:\"Comment Deleted\"});refresh();}).catch(function(err){setToaster({type:\"warning\",message:\"Comment deleted \",show:true,title:\"Comment Deleted\"});});};return/*#__PURE__*/_jsx(Card,{className:\"rounded-3 my-3\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Card.Title,{className:\"d-flex flex-row\"+\" justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row\",children:[/*#__PURE__*/_jsx(Image,{src:comment.author.avatar,roundedCircle:true,width:48,height:48,className:\"me-2 border border-primary border-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column\"+\" justify-content-start\"+\" align-self-center mt-2\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"fs-6 m-0\",children:[comment.author.first_name,\" \",comment.author.last_name]}),/*#__PURE__*/_jsx(\"p\",{className:\"fs-6 fw-lighter\",children:/*#__PURE__*/_jsx(\"small\",{children:Moment(comment.created).format('dd MMM YY hh:mm:ss')})})]})]}),user.name===comment.author.name&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Dropdown,{children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{as:MoreToggleIcon}),/*#__PURE__*/_jsxs(Dropdown.Menu,{children:[/*#__PURE__*/_jsx(UpdateComment,{comment:comment,refresh:refresh,postId:postId}),/*#__PURE__*/_jsx(Dropdown.Item,{onClick:handleDelete,className:\"text-danger\",children:\"Delete\"})]})]})})]}),/*#__PURE__*/_jsx(Card.Text,{children:comment.body})]})});}export default Comment;","map":{"version":3,"names":["React","useContext","MoreOutlined","Image","Card","Dropdown","axiosService","getUser","Context","UpdateComment","Moment","jsx","_jsx","jsxs","_jsxs","MoreToggleIcon","forwardRef","_ref","ref","onClick","href","e","preventDefault","children","Comment","props","postId","comment","refresh","_useContext","setToaster","user","handleDelete","delete","concat","id","then","type","message","show","title","catch","err","className","Body","Title","src","author","avatar","roundedCircle","width","height","first_name","last_name","created","format","name","Toggle","as","Menu","Item","Text","body"],"sources":["C:/Users/alexa/OneDrive/Programming/FULL_STACK_DJANGO_AND_REACT/Chapter_1/social-media-app/src/components/comments/Comment.jsx"],"sourcesContent":["//src/components/comments/Comment.jsx\r\nimport React, { useContext } from \"react\";\r\nimport { MoreOutlined } from \"@ant-design/icons\";\r\nimport { Image, Card, Dropdown } from \"react-bootstrap\";\r\nimport axiosService from \"../../helpers/axios\";\r\nimport { getUser } from \"../../hooks/user.actions\";\r\nimport { Context } from \"../Layouts\";\r\nimport UpdateComment from \"./UpdateComment\";\r\nimport Moment from 'moment';\r\n\r\n\r\nconst MoreToggleIcon = React.forwardRef(({ onClick }, ref) => (\r\n    <a\r\n    href = \"#\"\r\n    ref = {ref}\r\n    onClick = {(e) => {\r\n        e.preventDefault();\r\n        onClick(e);\r\n    }}\r\n    >\r\n        <MoreOutlined />\r\n    </a>\r\n));\r\n\r\nfunction Comment(props){\r\n    const { postId, comment, refresh } = props;\r\n    const { setToaster } = useContext(Context);\r\n    const user = getUser();\r\n\r\n    const handleDelete = () => {\r\n        axiosService.delete(`/post/${postId}/comment/${comment.id}/`)\r\n        .then(() => {\r\n            setToaster({\r\n                type: \"danger\",\r\n                message: \"Comment deleted\",\r\n                show: true,\r\n                title: \"Comment Deleted\",\r\n            });\r\n            refresh();\r\n        })\r\n        .catch((err) => {\r\n            setToaster({\r\n                type: \"warning\",\r\n                message: \"Comment deleted \",\r\n                show: true,\r\n                title: \"Comment Deleted\"\r\n            });\r\n        });\r\n    };\r\n\r\n\r\n    return (\r\n        <Card className = \"rounded-3 my-3\">\r\n            <Card.Body>\r\n                <Card.Title className = {\"d-flex flex-row\" +\r\n                                            \" justify-content-between\"}>\r\n                    <div className = \"d-flex flex-row\">\r\n                        <Image\r\n                        src = {comment.author.avatar}\r\n                        roundedCircle\r\n                        width = {48}\r\n                        height = {48}\r\n                        className = \"me-2 border border-primary border-2\"/>\r\n                        <div className = {\"d-flex flex-column\" +\r\n                                            \" justify-content-start\" +\r\n                                            \" align-self-center mt-2\"}>\r\n                            <p className = \"fs-6 m-0\">\r\n                                {comment.author.first_name} {comment.author.last_name} \r\n                            </p>\r\n                            <p className = \"fs-6 fw-lighter\">\r\n                                <small>\r\n                                    {Moment(comment.created).format('dd MMM YY hh:mm:ss') }\r\n                                </small>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    {user.name === comment.author.name && (\r\n                        <div>\r\n                            <Dropdown>\r\n                                <Dropdown.Toggle\r\n                                as = {MoreToggleIcon}>\r\n                                </Dropdown.Toggle>\r\n                                <Dropdown.Menu>\r\n                                    <UpdateComment\r\n                                    comment = {comment}\r\n                                    refresh = {refresh}\r\n                                    postId = {postId}/>\r\n                                    <Dropdown.Item\r\n                                    onClick = {handleDelete}\r\n                                    className = \"text-danger\">\r\n                                        Delete\r\n                                    </Dropdown.Item>\r\n                                    \r\n                                </Dropdown.Menu>\r\n                            </Dropdown>\r\n                        </div>\r\n                    )}\r\n                </Card.Title>\r\n                <Card.Text>\r\n                    {comment.body}\r\n                </Card.Text>\r\n            </Card.Body>\r\n        </Card>\r\n    );\r\n}\r\n\r\nexport default Comment;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}