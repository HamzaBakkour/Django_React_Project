{"ast":null,"code":"import _objectSpread from\"C:/Users/alexa/OneDrive/Programming/FULL_STACK_DJANGO_AND_REACT/Chapter_1/social-media-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/alexa/OneDrive/Programming/FULL_STACK_DJANGO_AND_REACT/Chapter_1/social-media-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";//src/components/posts/CreatePost.jsx\nimport React,{useState,useContext}from\"react\";import{Button,Modal,Form}from\"react-bootstrap\";import axiosService from\"../../helpers/axios\";import{getUser}from\"../../hooks/user.actions\";import{Context}from\"../Layouts\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function CreatePost(props){var refresh=props.refresh;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),validated=_useState4[0],setValidated=_useState4[1];var _useState5=useState({body:\"\"}),_useState6=_slicedToArray(_useState5,2),form=_useState6[0],setForm=_useState6[1];var user=getUser();var _useContext=useContext(Context),setToaster=_useContext.setToaster;var handleSubmit=function handleSubmit(event){event.preventDefault();var createPostForm=event.currentTarget;if(createPostForm.checkValidity()===false){event.stopPropagation();}setValidated(true);var data={author:user.id,body:form.body};axiosService.post(\"/post/\",data).then(function(){handleClose();setToaster({type:\"success\",message:\"Post created\",show:true,title:\"Post Success\"});setForm({});refresh();}).catch(function(){setToaster({type:\"danger\",message:\"An error occurred\",show:true,title:\"Post Error\"});});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Form.Group,{className:\"my-3 w-75\",children:/*#__PURE__*/_jsx(Form.Control,{className:\"py-2 rounded-pill border-primary text-primary\",type:\"text\",placeholder:\"Write a post\",onClick:handleShow})}),/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,className:\"border-0\",children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Create Post\"})}),/*#__PURE__*/_jsx(Modal.Body,{className:\"border-0\",children:/*#__PURE__*/_jsx(Form,{noValidate:true,validated:validated,onSubmit:handleSubmit,children:/*#__PURE__*/_jsx(Form.Group,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Form.Control,{name:\"body\",value:form.body,onChange:function onChange(e){return setForm(_objectSpread(_objectSpread({},form),{},{body:e.target.value}));},as:\"textarea\",rows:3})})})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleSubmit,disabled:form.body===undefined,children:\"Post\"})})]})]});}export default CreatePost;","map":{"version":3,"names":["React","useState","useContext","Button","Modal","Form","axiosService","getUser","Context","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CreatePost","props","refresh","_useState","_useState2","_slicedToArray","show","setShow","handleClose","handleShow","_useState3","_useState4","validated","setValidated","_useState5","body","_useState6","form","setForm","user","_useContext","setToaster","handleSubmit","event","preventDefault","createPostForm","currentTarget","checkValidity","stopPropagation","data","author","id","post","then","type","message","title","catch","children","Group","className","Control","placeholder","onClick","onHide","Header","closeButton","Title","Body","noValidate","onSubmit","name","value","onChange","e","_objectSpread","target","as","rows","Footer","variant","disabled","undefined"],"sources":["C:/Users/alexa/OneDrive/Programming/FULL_STACK_DJANGO_AND_REACT/Chapter_1/social-media-app/src/components/posts/CreatePost.jsx"],"sourcesContent":["//src/components/posts/CreatePost.jsx\r\nimport React, { useState, useContext } from \"react\";\r\nimport { Button, Modal, Form } from \"react-bootstrap\"\r\nimport axiosService from \"../../helpers/axios\";\r\nimport { getUser } from \"../../hooks/user.actions\";\r\nimport { Context } from \"../Layouts\";\r\n\r\nfunction CreatePost(props) {\r\n    const { refresh } = props;\r\n    const [show, setShow] = useState(false);\r\n    const handleClose = () => setShow(false);\r\n    const handleShow = () => setShow(true);\r\n    const [validated, setValidated] = useState(false);\r\n    const [form, setForm] = useState({\r\n        body: \"\",\r\n    });\r\n    const user = getUser()\r\n    const { setToaster } = useContext(Context)\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        const createPostForm = event.currentTarget;\r\n\r\n        if(createPostForm.checkValidity() === false){\r\n            event.stopPropagation();\r\n        }\r\n        setValidated(true);\r\n        const data = {\r\n            author: user.id,\r\n            body: form.body,\r\n        };\r\n\r\n        axiosService.post(\"/post/\", data)\r\n        .then(() => {\r\n            handleClose();\r\n            setToaster({\r\n                type: \"success\",\r\n                message: \"Post created\",\r\n                show: true,\r\n                title: \"Post Success\",\r\n            });\r\n\r\n            setForm({});\r\n            refresh();\r\n        })\r\n        .catch(() => {\r\n            setToaster({\r\n                type: \"danger\",\r\n                message: \"An error occurred\",\r\n                show: true,\r\n                title: \"Post Error\",\r\n            })\r\n        });\r\n    };\r\n    return (\r\n        <>\r\n            <Form.Group className = \"my-3 w-75\">\r\n                <Form.Control\r\n                className = \"py-2 rounded-pill border-primary text-primary\"\r\n                type = \"text\"\r\n                placeholder = \"Write a post\"\r\n                onClick = {handleShow}/>\r\n            </Form.Group>\r\n\r\n            <Modal show = {show} onHide = {handleClose}>\r\n                <Modal.Header closeButton className = \"border-0\">\r\n                    <Modal.Title>\r\n                        Create Post\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body className = \"border-0\">\r\n                    <Form\r\n                    noValidate\r\n                    validated = {validated}\r\n                    onSubmit = {handleSubmit}>\r\n                        <Form.Group className = \"mb-3\">\r\n                            <Form.Control\r\n                            name = \"body\"\r\n                            value = {form.body}\r\n                            onChange = {(e) => setForm({\r\n                                ...form,\r\n                                body: e.target.value\r\n                            })}\r\n                            as = \"textarea\"\r\n                            rows = {3}\r\n                            />\r\n                        </Form.Group>\r\n                    </Form>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button\r\n                    variant = \"primary\"\r\n                    onClick = { handleSubmit }\r\n                    disabled = { form.body === undefined }>\r\n                        Post\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default CreatePost;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}