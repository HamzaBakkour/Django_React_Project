{"ast":null,"code":"import _objectSpread from\"C:/Users/alexa/OneDrive/Programming/FULL_STACK_DJANGO_AND_REACT/Chapter_1/social-media-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/alexa/OneDrive/Programming/FULL_STACK_DJANGO_AND_REACT/Chapter_1/social-media-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";//src/components/posts/UpdatePost.jsx\nimport React,{useState,useContext}from\"react\";import{Button,Modal,Form,Dropdown}from\"react-bootstrap\";import axiosService from\"../../helpers/axios\";import{Context}from\"../Layouts\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function UpdatePost(props){var post=props.post,refresh=props.refresh;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),validated=_useState4[0],setValidated=_useState4[1];var _useState5=useState({author:post.author.id,body:post.body}),_useState6=_slicedToArray(_useState5,2),form=_useState6[0],setForm=_useState6[1];var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};var _useContext=useContext(Context),setToaster=_useContext.setToaster;var handleSubmit=function handleSubmit(event){event.preventDefault();var updatePostForm=event.currentTarget;if(updatePostForm.checkValidity()===false){event.stopPropagation();}setValidated(true);var data={author:form.author,body:form.body};axiosService.put(\"/post/\".concat(post.id,\"/\"),data).then(function(){handleClose();setToaster({type:\"success\",message:\"Post updated\",show:true,title:\"Sccuess\"});refresh();}).catch(function(error){setToaster({type:\"danger\",message:\"An error occurred.\",show:true,title:\"Post Error\"});});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Dropdown.Item,{onClick:handleShow,children:\"Modify\"}),/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,className:\"border-0\",children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Update Post\"})}),/*#__PURE__*/_jsx(Modal.Body,{className:\"border-0\",children:/*#__PURE__*/_jsx(Form,{noValidate:true,validated:validated,onSubmit:handleSubmit,children:/*#__PURE__*/_jsx(Form.Group,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Form.Control,{name:\"body\",value:form.body,onChange:function onChange(e){return setForm(_objectSpread(_objectSpread({},form),{},{body:e.target.value}));},as:\"textarea\",rows:3})})})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleSubmit,children:\"Modify\"})})]})]});}export default UpdatePost;","map":{"version":3,"names":["React","useState","useContext","Button","Modal","Form","Dropdown","axiosService","Context","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UpdatePost","props","post","refresh","_useState","_useState2","_slicedToArray","show","setShow","_useState3","_useState4","validated","setValidated","_useState5","author","id","body","_useState6","form","setForm","handleClose","handleShow","_useContext","setToaster","handleSubmit","event","preventDefault","updatePostForm","currentTarget","checkValidity","stopPropagation","data","put","concat","then","type","message","title","catch","error","children","Item","onClick","onHide","Header","closeButton","className","Title","Body","noValidate","onSubmit","Group","Control","name","value","onChange","e","_objectSpread","target","as","rows","Footer","variant"],"sources":["C:/Users/alexa/OneDrive/Programming/FULL_STACK_DJANGO_AND_REACT/Chapter_1/social-media-app/src/components/posts/UpdatePost.jsx"],"sourcesContent":["//src/components/posts/UpdatePost.jsx\r\nimport React, { useState , useContext} from \"react\";\r\nimport { Button, Modal, Form, Dropdown } from \"react-bootstrap\";\r\nimport axiosService from \"../../helpers/axios\";\r\nimport { Context } from \"../Layouts\";\r\n\r\nfunction UpdatePost (props) {\r\n    const { post, refresh } = props;\r\n    const [show, setShow] = useState(false);\r\n    const [validated, setValidated] = useState(false);\r\n    const [form, setForm] = useState({\r\n        author: post.author.id,\r\n        body: post.body,\r\n    })\r\n    const handleClose = () => setShow(false);\r\n    const handleShow = () => setShow(true);\r\n    const { setToaster } = useContext(Context);\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        const updatePostForm = event.currentTarget;\r\n\r\n        if (updatePostForm.checkValidity() === false){\r\n            event.stopPropagation();\r\n        }\r\n\r\n        setValidated(true);\r\n        const data = {\r\n            author: form.author,\r\n            body: form.body,\r\n        };\r\n\r\n        axiosService.put(`/post/${post.id}/`, data)\r\n        .then(() => {\r\n            handleClose();\r\n            setToaster({\r\n                type: \"success\",\r\n                message: \"Post updated\",\r\n                show: true,\r\n                title: \"Sccuess\",\r\n            });\r\n            refresh();\r\n        })\r\n        .catch((error) => {\r\n            setToaster({\r\n                type: \"danger\",\r\n                message: \"An error occurred.\",\r\n                show: true,\r\n                title: \"Post Error\",\r\n            })\r\n        });\r\n    };\r\n    return (\r\n        <>\r\n            <Dropdown.Item\r\n            onClick = {handleShow}>\r\n                Modify\r\n            </Dropdown.Item>\r\n\r\n            <Modal\r\n            show = {show}\r\n            onHide = {handleClose}>\r\n\r\n                <Modal.Header\r\n                closeButton\r\n                className = \"border-0\">\r\n                    <Modal.Title>Update Post</Modal.Title>\r\n                </Modal.Header>\r\n\r\n                <Modal.Body className = \"border-0\">\r\n                    <Form\r\n                    noValidate\r\n                    validated = {validated}\r\n                    onSubmit = {handleSubmit}>\r\n                        <Form.Group className = \"mb-3\">\r\n                            <Form.Control\r\n                            name = \"body\"\r\n                            value = {form.body}\r\n                            onChange = {\r\n                                (e) => setForm({\r\n                                    ...form,\r\n                                    body: e.target.value\r\n                                })\r\n                            }\r\n                            as = \"textarea\"\r\n                            rows = {3}/>\r\n                        </Form.Group>\r\n                    </Form>\r\n                </Modal.Body>\r\n\r\n                <Modal.Footer>\r\n                    <Button\r\n                    variant = \"primary\"\r\n                    onClick = {handleSubmit}>\r\n                    Modify\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default UpdatePost;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}