{"ast":null,"code":"//src/components/posts/Post.jsx\nimport React,{useContext}from\"react\";import{LikeFilled,CommentOutlined,LikeOutlined,MoreOutlined}from'@ant-design/icons';import{Image,Card,Dropdown}from\"react-bootstrap\";import{Context}from\"../Layouts\";import axiosService from\"../../helpers/axios\";import{getUser}from\"../../hooks/user.actions\";import UpdatePost from\"./UpdatePost\";import{Link}from\"react-router-dom\";import Moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MoreToggleIcon=/*#__PURE__*/React.forwardRef(function(_ref,ref){var _onClick=_ref.onClick;return/*#__PURE__*/_jsx(\"a\",{href:\"#\",ref:ref,onClick:function onClick(e){e.preventDefault();_onClick(e);},children:/*#__PURE__*/_jsx(MoreOutlined,{})});});function Post(props){//The refresh function will come from SWR posts.\n//SWR return an object with a mutate method that\n//can be used to trigger the fetching of data.\nvar post=props.post,refresh=props.refresh,isSinglePost=props.isSinglePost;var _useContext=useContext(Context),setToaster=_useContext.setToaster;var handleLikeClick=function handleLikeClick(action){axiosService.post(\"/post/\".concat(post.id,\"/\").concat(action,\"/\")).then(function(){refresh();}).catch(function(err){return console.error(err);});};var user=getUser();var handleDelete=function handleDelete(){axiosService.delete(\"/post/\".concat(post.id,\"/\")).then(function(){setToaster({type:\"warning\",message:\"Post deleted\",show:true,title:\"Post Deleted\"});refresh();}).catch(function(){setToaster({type:\"danger\",message:\"An error occurred.\",show:true,title:\"Post Error\"});});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Card,{className:\"rounded-3 my-4\",children:[/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsxs(Card.Title,{className:\"d-flex flex-row justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row\",children:[/*#__PURE__*/_jsx(Image,{src:post.author.avatar,roundedCircle:true,width:48,height:48,className:\"me-2 border border-primary border-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex \"+\"flex-column \"+\"justify-content-start\"+\" align-self-center mt-2\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"fs-6 m-0\",children:[post.author.first_name,\" \",post.author.last_name]}),/*#__PURE__*/_jsx(\"p\",{className:\"fs-6 fw-leighter\",children:/*#__PURE__*/_jsx(\"small\",{children:Moment(post.created).format('dd MMM YY hh:mm:ss')})})]})]}),user.email===post.author.email&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Dropdown,{children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{as:MoreToggleIcon}),/*#__PURE__*/_jsxs(Dropdown.Menu,{children:[/*#__PURE__*/_jsx(UpdatePost,{post:post,refresh:refresh}),/*#__PURE__*/_jsx(Dropdown.Item,{onClick:handleDelete,className:\"text-danger\",children:\"Delete\"})]})]})})]}),/*#__PURE__*/_jsx(Card.Text,{children:post.body}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row\",children:[/*#__PURE__*/_jsx(LikeFilled,{style:{color:\"#fff\",backgroundColor:\"#0D6EFD\",borderRadius:\"50%\",width:\"18px\",height:\"18px\",fontSize:\"75%\",padding:\"2px\",margin:\"3px\"}}),/*#__PURE__*/_jsx(\"p\",{className:\"ms-1 fs-6\",children:/*#__PURE__*/_jsxs(\"small\",{children:[post.likes_count,\" like\"]})})]})]}),/*#__PURE__*/_jsxs(Card.Footer,{className:\"d-flex bg-white w-50 \"+\"justify-content-between \"+\"border-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row\",children:[/*#__PURE__*/_jsx(LikeOutlined,{style:{width:\"24px\",height:\"24px\",padding:\"2px\",fontsize:\"20px\",color:post.liked?\"#0D6EFD\":\"#C4C4C4\"},onClick:function onClick(){if(post.liked){handleLikeClick(\"remove_like\");}else{handleLikeClick(\"like\");}}}),/*#__PURE__*/_jsx(\"p\",{className:\"ms-1\",children:/*#__PURE__*/_jsx(\"small\",{children:\"Like\"})})]}),!isSinglePost&&/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row\",children:[/*#__PURE__*/_jsx(CommentOutlined,{style:{width:\"24px\",height:\"24px\",padding:\"2px\",fontSize:\"20px\",color:\"#0D6EFD\"}}),!isSinglePost&&/*#__PURE__*/_jsx(\"p\",{className:\"ms-1 fs-6\",children:/*#__PURE__*/_jsx(\"small\",{children:/*#__PURE__*/_jsx(Link,{to:\"/post/\".concat(post.id,\"/\"),children:\"Comment\"})})})]})]})]})});}export default Post;","map":{"version":3,"names":["React","useContext","LikeFilled","CommentOutlined","LikeOutlined","MoreOutlined","Image","Card","Dropdown","Context","axiosService","getUser","UpdatePost","Link","Moment","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","MoreToggleIcon","forwardRef","_ref","ref","onClick","href","e","preventDefault","children","Post","props","post","refresh","isSinglePost","_useContext","setToaster","handleLikeClick","action","concat","id","then","catch","err","console","error","user","handleDelete","delete","type","message","show","title","className","Body","Title","src","author","avatar","roundedCircle","width","height","first_name","last_name","created","format","email","Toggle","as","Menu","Item","Text","body","style","color","backgroundColor","borderRadius","fontSize","padding","margin","likes_count","Footer","fontsize","liked","to"],"sources":["C:/Users/alexa/OneDrive/Programming/FULL_STACK_DJANGO_AND_REACT/Chapter_1/social-media-app/src/components/posts/Post.jsx"],"sourcesContent":["//src/components/posts/Post.jsx\r\nimport React, { useContext } from \"react\";\r\nimport { LikeFilled,\r\n    CommentOutlined,\r\n    LikeOutlined, MoreOutlined} from '@ant-design/icons';\r\nimport { Image, Card, Dropdown, } from \"react-bootstrap\";\r\nimport { Context } from \"../Layouts\";\r\nimport axiosService from \"../../helpers/axios\";\r\nimport { getUser } from \"../../hooks/user.actions\";\r\nimport UpdatePost from \"./UpdatePost\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Moment from 'moment';\r\n\r\nconst MoreToggleIcon = React.forwardRef(({ onClick }, ref) => (\r\n    <a\r\n    href = \"#\"\r\n    ref = {ref}\r\n    onClick = {(e) => {\r\n        e.preventDefault();\r\n        onClick(e);\r\n    }}\r\n    >\r\n        <MoreOutlined />\r\n    </a>\r\n));\r\n\r\nfunction Post (props) {\r\n    //The refresh function will come from SWR posts.\r\n    //SWR return an object with a mutate method that\r\n    //can be used to trigger the fetching of data.\r\n    const { post, refresh, isSinglePost } = props;\r\n    const { setToaster } = useContext(Context);\r\n\r\n    const handleLikeClick = (action) => {\r\n        axiosService.post(`/post/${post.id}/${action}/`)\r\n        .then(() => {\r\n            refresh();\r\n        })\r\n        .catch((err) => console.error(err));\r\n    };\r\n\r\n    const user = getUser();\r\n\r\n    const handleDelete = () => {\r\n        axiosService.delete(`/post/${post.id}/`)\r\n        .then(() => {\r\n            setToaster({\r\n                type: \"warning\",\r\n                message: \"Post deleted\",\r\n                show: true,\r\n                title: \"Post Deleted\",\r\n            })\r\n            refresh();\r\n        })\r\n        .catch(() => {\r\n            setToaster({\r\n                type: \"danger\",\r\n                message: \"An error occurred.\",\r\n                show: true,\r\n                title: \"Post Error\",\r\n            })\r\n        });\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <Card className = \"rounded-3 my-4\">\r\n                <Card.Body>\r\n                    <></>\r\n                    <Card.Title\r\n                    className = \"d-flex flex-row justify-content-between\">\r\n                        <div className = \"d-flex flex-row\">\r\n                            <Image\r\n                            src = {post.author.avatar}\r\n                            roundedCircle\r\n                            width = {48}\r\n                            height = {48}\r\n                            className = \"me-2 border border-primary border-2\"/>\r\n                            <div\r\n                            className = {\"d-flex \" +\r\n                                        \"flex-column \" +\r\n                                        \"justify-content-start\" +\r\n                                        \" align-self-center mt-2\"}>\r\n                                \r\n                                <p className = \"fs-6 m-0\">\r\n                                    {post.author.first_name} {post.author.last_name}\r\n                                </p>\r\n                                <p className = \"fs-6 fw-leighter\">\r\n                                    <small>\r\n                                        {Moment(post.created).format('dd MMM YY hh:mm:ss')}\r\n                                    </small>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        {user.email === post.author.email && (\r\n                            <div>\r\n                                <Dropdown>\r\n                                    <Dropdown.Toggle as = {MoreToggleIcon}>\r\n                                    </Dropdown.Toggle>\r\n                                    <Dropdown.Menu>\r\n                                            \r\n                                            <UpdatePost\r\n                                            post = {post}\r\n                                            refresh = {refresh} />\r\n                                            \r\n                                        <Dropdown.Item\r\n                                        onClick = {handleDelete}\r\n                                        className = \"text-danger\">\r\n                                            Delete\r\n                                        </Dropdown.Item>\r\n                                    </Dropdown.Menu>\r\n                                </Dropdown>\r\n                            </div>\r\n                        )}\r\n                    </Card.Title>\r\n                    <Card.Text>\r\n                        {post.body}\r\n                    </Card.Text>\r\n                    <div className = \"d-flex flex-row\">\r\n                        <LikeFilled\r\n                        style = {{\r\n                            color: \"#fff\",\r\n                            backgroundColor: \"#0D6EFD\",\r\n                            borderRadius: \"50%\",\r\n                            width: \"18px\",\r\n                            height: \"18px\",\r\n                            fontSize: \"75%\",\r\n                            padding: \"2px\",\r\n                            margin: \"3px\",\r\n                        }}/>\r\n                        <p className = \"ms-1 fs-6\">\r\n                            <small>\r\n                                {post.likes_count} like\r\n                            </small>\r\n                        </p>\r\n                    </div>\r\n                </Card.Body>\r\n                <Card.Footer className = {\"d-flex bg-white w-50 \" +\r\n                                            \"justify-content-between \"+\r\n                                            \"border-0\"\r\n                }>\r\n                    <div className = \"d-flex flex-row\">\r\n                        <LikeOutlined \r\n                        style = {{\r\n                            width: \"24px\",\r\n                            height: \"24px\",\r\n                            padding: \"2px\",\r\n                            fontsize: \"20px\",\r\n                            color: post.liked ? \"#0D6EFD\" : \"#C4C4C4\",\r\n                        }}\r\n                        onClick = {() => {\r\n                            if (post.liked) {\r\n                                handleLikeClick(\"remove_like\");\r\n                            } else {\r\n                                handleLikeClick(\"like\");\r\n                            }\r\n                        }}\r\n                        />\r\n                        <p className = \"ms-1\">\r\n                            <small>\r\n                                Like\r\n                            </small>\r\n                        </p>\r\n                    </div>\r\n                    {!isSinglePost && (\r\n                                        <div className = \"d-flex flex-row\">\r\n                                            <CommentOutlined\r\n                                            style = {{\r\n                                                width: \"24px\",\r\n                                                height: \"24px\",\r\n                                                padding: \"2px\",\r\n                                                fontSize: \"20px\",\r\n                                                color: \"#0D6EFD\",\r\n                                            }}/>\r\n                                            {!isSinglePost && (\r\n                                            <p className = \"ms-1 fs-6\">\r\n                                                <small>\r\n                                                    <Link to={`/post/${post.id}/`}>\r\n                                                        Comment\r\n                                                    </Link>\r\n                                                </small>\r\n                                            </p>\r\n                                        )}\r\n                                        </div>\r\n                                    )\r\n                }\r\n                </Card.Footer>\r\n            </Card>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Post;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}