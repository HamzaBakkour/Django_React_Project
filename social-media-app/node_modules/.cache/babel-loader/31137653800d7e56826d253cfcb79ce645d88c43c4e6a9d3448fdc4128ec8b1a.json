{"ast":null,"code":"import{useNavigate}from\"react-router-dom\";import axiosService from\"../helpers/axios\";import axios from\"axios\";function useUserActions(){var navigate=useNavigate();var baseURL=\"ec2-16-170-201-40.eu-north-1.compute.amazonaws.com\";return{login:login,register:register,logout:logout,edit:edit};// Login the user\nfunction login(data){console.log(\"login, baseURL: \",baseURL);return axios.post(\"\".concat(baseURL,\"/auth/login/\"),data).then(function(res){// Registering the account and tokens in the store\nsetUserData(res.data);navigate(\"/\");});}// Register the user\nfunction register(data){return axios.post(\"\".concat(baseURL,\"/auth/register/\"),data).then(function(res){// Registering the account and tokens in the store\nsetUserData(res.data);navigate(\"/\");});}// Edit the user\nfunction edit(data,userId){return axiosService.patch(\"\".concat(baseURL,\"/user/\").concat(userId,\"/\"),data,{headers:{\"content-type\":\"multipart/form-data\"}}).then(function(res){// Registering the account in the store\nlocalStorage.setItem(\"auth\",JSON.stringify({access:getAccessToken(),refresh:getRefreshToken(),user:res.data}));});}// Logout the user\nfunction logout(){return axiosService.post(\"\".concat(baseURL,\"/auth/logout/\"),{refresh:getRefreshToken()}).then(function(){localStorage.removeItem(\"auth\");navigate(\"/login\");});}}// Get the user\nfunction getUser(){var auth=JSON.parse(localStorage.getItem(\"auth\"))||null;if(auth){return auth.user;}else{return null;}}// Get the access token\nfunction getAccessToken(){var auth=JSON.parse(localStorage.getItem(\"auth\"));return auth.access;}// Get the refresh token\nfunction getRefreshToken(){var auth=JSON.parse(localStorage.getItem(\"auth\"));return auth.refresh;}// Set the access, token and user property\nfunction setUserData(data){localStorage.setItem(\"auth\",JSON.stringify({access:data.access,refresh:data.refresh,user:data.user}));}export{useUserActions,getUser,getAccessToken,getRefreshToken,setUserData};","map":{"version":3,"names":["useNavigate","axiosService","axios","useUserActions","navigate","baseURL","login","register","logout","edit","data","console","log","post","concat","then","res","setUserData","userId","patch","headers","localStorage","setItem","JSON","stringify","access","getAccessToken","refresh","getRefreshToken","user","removeItem","getUser","auth","parse","getItem"],"sources":["C:/Users/alexa/OneDrive/Programming/FULL_STACK_DJANGO_AND_REACT/Chapter_1/social-media-app/src/hooks/user.actions.js"],"sourcesContent":["import { useNavigate } from \"react-router-dom\";\r\nimport axiosService from \"../helpers/axios\";\r\nimport axios from \"axios\";\r\n\r\nfunction useUserActions() {\r\n  const navigate = useNavigate();\r\n  const baseURL = \"ec2-16-170-201-40.eu-north-1.compute.amazonaws.com\";\r\n\r\n  return {\r\n    login,\r\n    register,\r\n    logout,\r\n    edit,\r\n  };\r\n\r\n\r\n  // Login the user\r\n  function login(data) {\r\n    console.log(\"login, baseURL: \", baseURL);\r\n    return axios.post(`${baseURL}/auth/login/`, data).then((res) => {\r\n      // Registering the account and tokens in the store\r\n      setUserData(res.data);\r\n      navigate(\"/\");\r\n    });\r\n  }\r\n\r\n  // Register the user\r\n  function register(data) {\r\n    return axios.post(`${baseURL}/auth/register/`, data).then((res) => {\r\n      // Registering the account and tokens in the store\r\n      setUserData(res.data);\r\n      navigate(\"/\");\r\n    });\r\n  }\r\n\r\n  // Edit the user\r\n  function edit(data, userId) {\r\n    return axiosService\r\n      .patch(`${baseURL}/user/${userId}/`, data, {\r\n        headers: {\r\n          \"content-type\": \"multipart/form-data\",\r\n        },\r\n      })\r\n      .then((res) => {\r\n        // Registering the account in the store\r\n        localStorage.setItem(\r\n          \"auth\",\r\n          JSON.stringify({\r\n            access: getAccessToken(),\r\n            refresh: getRefreshToken(),\r\n            user: res.data,\r\n          })\r\n        );\r\n      });\r\n  }\r\n\r\n  // Logout the user\r\n  function logout() {\r\n    return axiosService\r\n      .post(`${baseURL}/auth/logout/`, { refresh: getRefreshToken() })\r\n      .then(() => {\r\n        localStorage.removeItem(\"auth\");\r\n        navigate(\"/login\");\r\n      });\r\n  }\r\n}\r\n\r\n// Get the user\r\nfunction getUser() {\r\n  const auth = JSON.parse(localStorage.getItem(\"auth\")) || null;\r\n  if (auth) {\r\n    return auth.user;\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n\r\n// Get the access token\r\nfunction getAccessToken() {\r\n  const auth = JSON.parse(localStorage.getItem(\"auth\"));\r\n  return auth.access;\r\n}\r\n\r\n// Get the refresh token\r\nfunction getRefreshToken() {\r\n  const auth = JSON.parse(localStorage.getItem(\"auth\"));\r\n  return auth.refresh;\r\n}\r\n\r\n// Set the access, token and user property\r\nfunction setUserData(data) {\r\n  localStorage.setItem(\r\n    \"auth\",\r\n    JSON.stringify({\r\n      access: data.access,\r\n      refresh: data.refresh,\r\n      user: data.user,\r\n    })\r\n  );\r\n}\r\n\r\nexport {\r\n  useUserActions,\r\n  getUser,\r\n  getAccessToken,\r\n  getRefreshToken,\r\n  setUserData,\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}