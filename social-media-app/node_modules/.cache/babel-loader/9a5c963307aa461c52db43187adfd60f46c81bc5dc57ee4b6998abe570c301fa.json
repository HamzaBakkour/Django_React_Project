{"ast":null,"code":"var _s = $RefreshSig$();\n//src/hooks/user.actions.js\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport axtiosService from \"../helpers/axios\";\nfunction useUserActions() {\n  _s();\n  const navigate = useNavigate();\n  const baseURL = \"http://localhost:8000/api\";\n  return {\n    login,\n    register,\n    logout,\n    edit\n  };\n\n  // Login the user\n  function login(data) {\n    return axios.post(`${baseURL}/auth/login/`, data).then(res => {\n      // Registering the account and tokens in the store\n      setUserData(res.data);\n      navigate(\"/\");\n    });\n  }\n\n  // Register the user\n  function register(data) {\n    return axios.post(`${baseURL}/auth/register/`, data).then(res => {\n      // Registering the account and tokens in the store\n      setUserData(res.data);\n      navigate(\"/\");\n    });\n  }\n\n  // Logout the user\n  function logout() {\n    localStorage.removeItem(\"auth\");\n    navigate(\"/login\");\n  }\n  function edit(data, userId) {\n    return axtiosService.patch(`${baseURL}/user/${userId}/`, data).then(res => {\n      localStorage.setItem(\"auth\", JSON.stringify({\n        access: getAccessToken(),\n        refresh: getRefreshToken(),\n        user: res.data\n      }));\n    });\n  }\n}\n\n// Get the user\n_s(useUserActions, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\nfunction getUser() {\n  const auth = JSON.parse(localStorage.getItem(\"auth\")) || null;\n  if (auth) {\n    return auth.user;\n  } else {\n    return null;\n  }\n}\n\n// Get the access token\nfunction getAccessToken() {\n  const auth = JSON.parse(localStorage.getItem(\"auth\"));\n  return auth.access;\n}\n\n// Get the refresh token\nfunction getRefreshToken() {\n  const auth = JSON.parse(localStorage.getItem(\"auth\"));\n  return auth.refresh;\n}\n\n// Set the access, token and user property\nfunction setUserData(data) {\n  localStorage.setItem(\"auth\", JSON.stringify({\n    access: data.access,\n    refresh: data.refresh,\n    user: data.user\n  }));\n}\nexport { useUserActions, getUser, getAccessToken, getRefreshToken };","map":{"version":3,"names":["axios","useNavigate","axtiosService","useUserActions","_s","navigate","baseURL","login","register","logout","edit","data","post","then","res","setUserData","localStorage","removeItem","userId","patch","setItem","JSON","stringify","access","getAccessToken","refresh","getRefreshToken","user","getUser","auth","parse","getItem"],"sources":["C:/Users/alexa/OneDrive/Programming/FULL_STACK_DJANGO_AND_REACT/Chapter_1/social-media-app/src/hooks/user.actions.js"],"sourcesContent":["//src/hooks/user.actions.js\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axtiosService from \"../helpers/axios\";\r\n\r\nfunction useUserActions() {\r\n    const navigate = useNavigate();\r\n    const baseURL = \"http://localhost:8000/api\";\r\n\r\n    return {\r\n        login,\r\n        register,\r\n        logout,\r\n        edit\r\n    };\r\n\r\n    // Login the user\r\n    function login(data) {\r\n            return axios.post(`${baseURL}/auth/login/`, data).then((res) => {\r\n            // Registering the account and tokens in the store\r\n            setUserData(res.data);\r\n            navigate(\"/\");\r\n        });\r\n    }\r\n\r\n    // Register the user\r\n    function register(data) {\r\n            return axios.post(`${baseURL}/auth/register/`, data).then((res) => {\r\n            // Registering the account and tokens in the store\r\n            setUserData(res.data);\r\n            navigate(\"/\");\r\n        });\r\n    }\r\n\r\n  // Logout the user\r\n    function logout() {\r\n        localStorage.removeItem(\"auth\");\r\n        navigate(\"/login\");\r\n    }\r\n\r\n    function edit (data, userId){\r\n        return axtiosService.patch(`${baseURL}/user/${userId}/`, data).then((res) => {\r\n            localStorage.setItem(\r\n                \"auth\",\r\n                JSON.stringify({\r\n                    access: getAccessToken(),\r\n                    refresh: getRefreshToken(),\r\n                    user: res.data,\r\n                })\r\n            );\r\n        });\r\n    }\r\n}\r\n\r\n\r\n// Get the user\r\nfunction getUser() {\r\n    const auth = JSON.parse(localStorage.getItem(\"auth\")) || null;\r\n    if (auth) {\r\n        return auth.user;\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n\r\n\r\n// Get the access token\r\nfunction getAccessToken() {\r\n    const auth = JSON.parse(localStorage.getItem(\"auth\"));\r\n    return auth.access;\r\n}\r\n\r\n// Get the refresh token\r\nfunction getRefreshToken() {\r\n    const auth = JSON.parse(localStorage.getItem(\"auth\"));\r\n    return auth.refresh;\r\n}\r\n\r\n// Set the access, token and user property\r\nfunction setUserData(data) {\r\n    localStorage.setItem(\r\n        \"auth\",\r\n        JSON.stringify({\r\n            access: data.access,\r\n            refresh: data.refresh,\r\n            user: data.user,\r\n        })\r\n    );\r\n}\r\n\r\nexport { useUserActions, getUser, getAccessToken, getRefreshToken };\r\n\r\n"],"mappings":";AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,aAAa,MAAM,kBAAkB;AAE5C,SAASC,cAAcA,CAAA,EAAG;EAAAC,EAAA;EACtB,MAAMC,QAAQ,GAAGJ,WAAW,CAAC,CAAC;EAC9B,MAAMK,OAAO,GAAG,2BAA2B;EAE3C,OAAO;IACHC,KAAK;IACLC,QAAQ;IACRC,MAAM;IACNC;EACJ,CAAC;;EAED;EACA,SAASH,KAAKA,CAACI,IAAI,EAAE;IACb,OAAOX,KAAK,CAACY,IAAI,CAAE,GAAEN,OAAQ,cAAa,EAAEK,IAAI,CAAC,CAACE,IAAI,CAAEC,GAAG,IAAK;MAChE;MACAC,WAAW,CAACD,GAAG,CAACH,IAAI,CAAC;MACrBN,QAAQ,CAAC,GAAG,CAAC;IACjB,CAAC,CAAC;EACN;;EAEA;EACA,SAASG,QAAQA,CAACG,IAAI,EAAE;IAChB,OAAOX,KAAK,CAACY,IAAI,CAAE,GAAEN,OAAQ,iBAAgB,EAAEK,IAAI,CAAC,CAACE,IAAI,CAAEC,GAAG,IAAK;MACnE;MACAC,WAAW,CAACD,GAAG,CAACH,IAAI,CAAC;MACrBN,QAAQ,CAAC,GAAG,CAAC;IACjB,CAAC,CAAC;EACN;;EAEF;EACE,SAASI,MAAMA,CAAA,EAAG;IACdO,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC;IAC/BZ,QAAQ,CAAC,QAAQ,CAAC;EACtB;EAEA,SAASK,IAAIA,CAAEC,IAAI,EAAEO,MAAM,EAAC;IACxB,OAAOhB,aAAa,CAACiB,KAAK,CAAE,GAAEb,OAAQ,SAAQY,MAAO,GAAE,EAAEP,IAAI,CAAC,CAACE,IAAI,CAAEC,GAAG,IAAK;MACzEE,YAAY,CAACI,OAAO,CAChB,MAAM,EACNC,IAAI,CAACC,SAAS,CAAC;QACXC,MAAM,EAAEC,cAAc,CAAC,CAAC;QACxBC,OAAO,EAAEC,eAAe,CAAC,CAAC;QAC1BC,IAAI,EAAEb,GAAG,CAACH;MACd,CAAC,CACL,CAAC;IACL,CAAC,CAAC;EACN;AACJ;;AAGA;AAAAP,EAAA,CAlDSD,cAAc;EAAA,QACFF,WAAW;AAAA;AAkDhC,SAAS2B,OAAOA,CAAA,EAAG;EACf,MAAMC,IAAI,GAAGR,IAAI,CAACS,KAAK,CAACd,YAAY,CAACe,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,IAAI;EAC7D,IAAIF,IAAI,EAAE;IACN,OAAOA,IAAI,CAACF,IAAI;EACpB,CAAC,MAAM;IACH,OAAO,IAAI;EACf;AACJ;;AAGA;AACA,SAASH,cAAcA,CAAA,EAAG;EACtB,MAAMK,IAAI,GAAGR,IAAI,CAACS,KAAK,CAACd,YAAY,CAACe,OAAO,CAAC,MAAM,CAAC,CAAC;EACrD,OAAOF,IAAI,CAACN,MAAM;AACtB;;AAEA;AACA,SAASG,eAAeA,CAAA,EAAG;EACvB,MAAMG,IAAI,GAAGR,IAAI,CAACS,KAAK,CAACd,YAAY,CAACe,OAAO,CAAC,MAAM,CAAC,CAAC;EACrD,OAAOF,IAAI,CAACJ,OAAO;AACvB;;AAEA;AACA,SAASV,WAAWA,CAACJ,IAAI,EAAE;EACvBK,YAAY,CAACI,OAAO,CAChB,MAAM,EACNC,IAAI,CAACC,SAAS,CAAC;IACXC,MAAM,EAAEZ,IAAI,CAACY,MAAM;IACnBE,OAAO,EAAEd,IAAI,CAACc,OAAO;IACrBE,IAAI,EAAEhB,IAAI,CAACgB;EACf,CAAC,CACL,CAAC;AACL;AAEA,SAASxB,cAAc,EAAEyB,OAAO,EAAEJ,cAAc,EAAEE,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}