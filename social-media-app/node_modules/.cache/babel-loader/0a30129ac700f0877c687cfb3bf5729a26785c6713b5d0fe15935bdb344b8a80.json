{"ast":null,"code":"import _objectSpread from\"C:/Users/alexa/OneDrive/Programming/FULL_STACK_DJANGO_AND_REACT/Chapter_1/social-media-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/alexa/OneDrive/Programming/FULL_STACK_DJANGO_AND_REACT/Chapter_1/social-media-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";//src/components/comments/UpdateComment.jsx\nimport React,{useState,useContext}from\"react\";import{Button,Modal,Form,Dropdown}from\"react-bootstrap\";import axiosService from\"../../helpers/axios\";import{Context}from\"../Layouts\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function UpdateComment(props){var postId=props.postId,comment=props.comment,refresh=props.refresh;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),validated=_useState4[0],setValidated=_useState4[1];var _useState5=useState({author:comment.author.id,body:comment.body,post:postId}),_useState6=_slicedToArray(_useState5,2),form=_useState6[0],setForm=_useState6[1];var _useContext=useContext(Context),setToaster=_useContext.setToaster;var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};var handleSubmit=function handleSubmit(event){event.preventDefault();var updateCommentForm=event.currentTarget;if(updateCommentForm.checkValidity()===false){event.stopPropagation();}setValidated(true);var data={author:form.author,body:form.body,post:postId};axiosService.put(\"/post/\".concat(postId,\"/comment/\").concat(comment.id,\"/\"),data).then(function(){handleClose();setToaster({type:\"success\",message:\"Comment updated\",show:true,title:\"Success!\"});refresh();}).catch(function(error){setToaster({type:\"danger\",message:\"An error occurred.\",show:true,title:\"Comment Error\"});});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Dropdown.Item,{onClick:handleShow,children:\"Modify\"}),/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,className:\"border-0\",children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Update Post\"})}),/*#__PURE__*/_jsx(Modal.Body,{className:\"border-0\",children:/*#__PURE__*/_jsx(Form,{noValidate:true,validated:validated,onSubmit:handleSubmit,children:/*#__PURE__*/_jsx(Form.Group,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Form.Control,{name:\"body\",value:form.body,onChange:function onChange(e){return setForm(_objectSpread(_objectSpread({},form),{},{body:e.target.value}));},as:\"textarea\",rows:3})})})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleSubmit,children:\"Modify\"})})]})]});}export default UpdateComment;","map":{"version":3,"names":["React","useState","useContext","Button","Modal","Form","Dropdown","axiosService","Context","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UpdateComment","props","postId","comment","refresh","_useState","_useState2","_slicedToArray","show","setShow","_useState3","_useState4","validated","setValidated","_useState5","author","id","body","post","_useState6","form","setForm","_useContext","setToaster","handleClose","handleShow","handleSubmit","event","preventDefault","updateCommentForm","currentTarget","checkValidity","stopPropagation","data","put","concat","then","type","message","title","catch","error","children","Item","onClick","onHide","Header","closeButton","className","Title","Body","noValidate","onSubmit","Group","Control","name","value","onChange","e","_objectSpread","target","as","rows","Footer","variant"],"sources":["C:/Users/alexa/OneDrive/Programming/FULL_STACK_DJANGO_AND_REACT/Chapter_1/social-media-app/src/components/comments/UpdateComment.jsx"],"sourcesContent":["//src/components/comments/UpdateComment.jsx\r\nimport React, { useState, useContext } from \"react\";\r\nimport { Button, Modal, Form, Dropdown } from \"react-bootstrap\";\r\nimport axiosService from \"../../helpers/axios\";\r\nimport { Context } from \"../Layouts\";\r\n\r\n\r\nfunction UpdateComment (props) {\r\n    const { postId, comment, refresh } = props;\r\n    const [ show, setShow ] = useState(false);\r\n    const [ validated, setValidated ] = useState(false);\r\n    const [ form, setForm ] = useState({\r\n        author: comment.author.id,\r\n        body: comment.body,\r\n        post: postId\r\n    });\r\n    const { setToaster } = useContext(Context);\r\n    const handleClose = () => setShow(false);\r\n    const handleShow = () => setShow(true);\r\n\r\n    const handleSubmit = ( event ) => {\r\n        event.preventDefault();\r\n        const updateCommentForm = event.currentTarget;\r\n        if (updateCommentForm.checkValidity() === false) {\r\n            event.stopPropagation();\r\n        }\r\n        setValidated(true);\r\n        const data = {\r\n            author: form.author,\r\n            body: form.body,\r\n            post: postId\r\n        };\r\n\r\n        axiosService.put(`/post/${postId}/comment/${comment.id}/`, data)\r\n        .then(() => {\r\n            handleClose();\r\n            setToaster({\r\n                type: \"success\",\r\n                message: \"Comment updated\",\r\n                show: true,\r\n                title: \"Success!\",\r\n            });\r\n            refresh();\r\n        })\r\n        .catch((error) => {\r\n            setToaster({\r\n                type: \"danger\",\r\n                message: \"An error occurred.\",\r\n                show: true,\r\n                title: \"Comment Error\"\r\n            });\r\n        });\r\n    };\r\n\r\n\r\n    return (\r\n        <>\r\n            <Dropdown.Item onClick = { handleShow }>\r\n                Modify\r\n            </Dropdown.Item>\r\n            <Modal\r\n            show = { show }\r\n            onHide = { handleClose }>\r\n                <Modal.Header\r\n                closeButton\r\n                className = \"border-0\">\r\n                    <Modal.Title>\r\n                        Update Post\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body className = \"border-0\">\r\n                    <Form\r\n                    noValidate\r\n                    validated = {validated}\r\n                    onSubmit = {handleSubmit}>\r\n                        <Form.Group className = \"mb-3\">\r\n                            <Form.Control\r\n                            name = \"body\"\r\n                            value = {form.body}\r\n                            onChange = {(e) => setForm({\r\n                                ...form,\r\n                                body: e.target.value\r\n                            })}\r\n                            as = \"textarea\"\r\n                            rows = {3}\r\n                            />\r\n                        </Form.Group>\r\n                    </Form>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button\r\n                    variant = \"primary\"\r\n                    onClick = {handleSubmit}>\r\n                        Modify\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default UpdateComment;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}