{"ast":null,"code":"import _objectSpread from\"C:/Users/alexa/OneDrive/Programming/FULL_STACK_DJANGO_AND_REACT/Chapter_1/social-media-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/alexa/OneDrive/Programming/FULL_STACK_DJANGO_AND_REACT/Chapter_1/social-media-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";//src/components/comments/CreateComment.jsx\nimport React,{useState,useContext}from\"react\";import{Button,Form,Image}from\"react-bootstrap\";import axiosService from\"../../helpers/axios\";import{getUser}from\"../../hooks/user.actions\";import{Context}from\"../Layouts\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CreateComment(props){var postId=props.postId,refresh=props.refresh;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),validated=_useState2[0],setValidated=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),form=_useState4[0],setForm=_useState4[1];var _useContext=useContext(Context),setToaster=_useContext.setToaster;var user=getUser();var handleSubmit=function handleSubmit(event){event.preventDefault();var createCommentForm=event.currentTarget;if(createCommentForm.checkValidity()===false){event.stopPropagation();}setValidated(true);var data={author:user.id,body:form.body,post:postId};axiosService.post(\"/post/\".concat(postId,\"/comment/\"),data).then(function(){setForm(_objectSpread(_objectSpread({},form),{},{body:\"\"}));setToaster({type:\"success\",message:\"Comment posted successfully\",show:true,title:\"Comment!\"});refresh();}).catch(function(){setToaster({type:\"danger\",message:\"\",show:true,title:\"An error occurred.!\"});});};return/*#__PURE__*/_jsxs(Form,{className:\"d-flex flex-row justify-content-between\",noValidate:true,validated:validated,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Image,{src:user.avatar,roundedCircle:true,width:48,height:48,className:\"my-2\"}),/*#__PURE__*/_jsx(Form.Group,{className:\"m-3 w-75\",children:/*#__PURE__*/_jsx(Form.Control,{className:\"py-2 rounded-pill border-primary\",type:\"text\",placeholder:\"Write a comment\",value:form.body,name:\"body\",onChange:function onChange(e){return setForm(_objectSpread(_objectSpread({},form),{},{body:e.target.value}));}})}),/*#__PURE__*/_jsx(\"div\",{className:\"m-auto\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleSubmit,disabled:form.body===undefined,size:\"small\",children:\"Comment\"})})]});}export default CreateComment;","map":{"version":3,"names":["React","useState","useContext","Button","Form","Image","axiosService","getUser","Context","jsx","_jsx","jsxs","_jsxs","CreateComment","props","postId","refresh","_useState","_useState2","_slicedToArray","validated","setValidated","_useState3","_useState4","form","setForm","_useContext","setToaster","user","handleSubmit","event","preventDefault","createCommentForm","currentTarget","checkValidity","stopPropagation","data","author","id","body","post","concat","then","_objectSpread","type","message","show","title","catch","className","noValidate","onSubmit","children","src","avatar","roundedCircle","width","height","Group","Control","placeholder","value","name","onChange","e","target","variant","onClick","disabled","undefined","size"],"sources":["C:/Users/alexa/OneDrive/Programming/FULL_STACK_DJANGO_AND_REACT/Chapter_1/social-media-app/src/components/comments/CreateComment.jsx"],"sourcesContent":["//src/components/comments/CreateComment.jsx\r\nimport React, { useState, useContext } from \"react\";\r\nimport { Button, Form, Image } from \"react-bootstrap\";\r\nimport axiosService from \"../../helpers/axios\";\r\nimport { getUser } from \"../../hooks/user.actions\";\r\nimport { Context } from \"../Layouts\";\r\n\r\n\r\nfunction CreateComment(props) {\r\n    const { postId, refresh } = props;\r\n    const [ validated, setValidated ] = useState(false);\r\n    const [ form, setForm ] = useState({});\r\n    const { setToaster } = useContext(Context);\r\n    const user = getUser();\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        const createCommentForm = event.currentTarget;\r\n        if (createCommentForm.checkValidity() === false){\r\n            event.stopPropagation();\r\n        }\r\n        setValidated(true);\r\n        const data = {\r\n            author: user.id,\r\n            body: form.body,\r\n            post: postId,\r\n        };\r\n\r\n        axiosService.post(`/post/${postId}/comment/`, data)\r\n        .then(() => {\r\n            setForm({...form, body: \"\"});\r\n            setToaster({\r\n                type: \"success\",\r\n                message: \"Comment posted successfully\",\r\n                show: true,\r\n                title: \"Comment!\",\r\n            });\r\n            refresh();\r\n        })\r\n        .catch(() => {\r\n            setToaster({\r\n                type: \"danger\",\r\n                message: \"\",\r\n                show: true,\r\n                title: \"An error occurred.!\",\r\n            });\r\n        });\r\n    };\r\n\r\n\r\n    return(\r\n        <Form\r\n        className = \"d-flex flex-row justify-content-between\"\r\n        noValidate\r\n        validated = {validated}\r\n        onSubmit = {handleSubmit}>\r\n            <Image\r\n            src = {user.avatar}\r\n            roundedCircle\r\n            width = {48}\r\n            height = {48}\r\n            className = \"my-2\"/>\r\n            <Form.Group className = \"m-3 w-75\">\r\n                <Form.Control\r\n                className = \"py-2 rounded-pill border-primary\"\r\n                type = \"text\"\r\n                placeholder = \"Write a comment\"\r\n                value = {form.body}\r\n                name = \"body\"\r\n                onChange = {(e) => setForm({\r\n                    ...form,\r\n                    body: e.target.value\r\n                })}/>\r\n            </Form.Group>\r\n            <div className = \"m-auto\">\r\n                <Button\r\n                variant = \"primary\"\r\n                onClick = {handleSubmit}\r\n                disabled = {form.body === undefined}\r\n                size = \"small\">\r\n                    Comment\r\n                </Button>\r\n            </div>\r\n        </Form>\r\n    );\r\n}\r\n\r\nexport default CreateComment;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}